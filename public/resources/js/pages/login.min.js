let LoginForm={elements:{loginContainer:"#login-form",emailInput:"#email-input",passwordInput:"#password-input",submitButton:"#login-button",errorMessage:"#error-message",burgerButton:".burger",rememberMeCheckbox:"#remember_me"},handlers:{loginProccess:function(){var e=LoginForm,s=window.$(e.elements.emailInput).val(),n=window.$(e.elements.passwordInput).val();let o=window.$(e.elements.errorMessage),t=window.$(e.elements.submitButton);o.text("").removeClass("is-danger is-success"),s&&n?(t.prop("disabled",!0).addClass("is-loading"),window.$.ajax({url:"user/login",type:"POST",contentType:"application/json",data:JSON.stringify({username:s,password:n}),success:function(s){if(o.text("").removeClass("is-danger is-success"),"Login successful"===s.message)o.text("Login successful").addClass("is-success"),setTimeout(function(){window.location.href="home"},700);else if(s.message)o.text(s.message).addClass("is-danger");else if(s.error)o.text(s.error).addClass("is-danger");else if(s.messages){let e="";e="object"==typeof s.messages?Object.values(s.messages).join(" "):s.messages,o.text(e).addClass("is-danger")}else o.text("Login failed. Please try again.").addClass("is-danger");t.prop("disabled",!1).removeClass("is-loading")},error:function(e){let s="An error occurred. Please try again.";e.responseJSON&&e.responseJSON.messages?s=e.responseJSON.messages.error:e.responseJSON&&e.responseJSON.error&&(s=e.responseJSON.error),o.text(s).addClass("is-danger"),t.prop("disabled",!1).removeClass("is-loading")}})):o.text("Please fill in all fields.").addClass("is-danger")},init:function(){}},binders:{init:function(){}},events:{loginSubmit:function(){let s=LoginForm;var e=window.$(s.elements.loginContainer),n=window.$(s.elements.submitButton);e.on("submit",function(e){e.preventDefault(),s.handlers.loginProccess()}),n.on("click",function(e){e.preventDefault(),s.handlers.loginProccess()})},loginBurger:function(){var e,s=LoginForm,n=window.$(s.elements.burgerButton);0!==n.length&&(s=n.data("target"),e=window.$("#"+s),n.on("click",function(){n.toggleClass("is-active"),e.toggleClass("is-active")}))},rememeberMe:function(){var e=LoginForm;let s=window.$(e.elements.rememberMeCheckbox),n=window.$(e.elements.emailInput),o=window.$(e.elements.passwordInput);s.on("change",function(){s.is(":checked")?(setLocalStorage("email",n.val()),setLocalStorage("password",o.val())):(removeLocalStorage("email"),removeLocalStorage("password"))})},setInputsFromStorage:function(){var e=LoginForm,s=window.$(e.elements.rememberMeCheckbox),n=window.$(e.elements.emailInput),e=window.$(e.elements.passwordInput);getLocalStorage("email")&&getLocalStorage("password")?(n.val(getLocalStorage("email")),e.val(getLocalStorage("password")),s.prop("checked",!0)):(n.val(""),e.val(""),s.prop("checked",!1))},init:function(){var e=LoginForm;e.events.setInputsFromStorage(),e.events.loginSubmit(),e.events.loginBurger(),e.events.rememeberMe()}},init:function(){this.binders.init(),this.handlers.init(),this.events.init()}};document.addEventListener("DOMContentLoaded",function(){LoginForm.init()});