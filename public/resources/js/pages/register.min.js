let RegisterForm={elements:{registerContainer:"#register-form",emailInput:"#register-email-input",passwordInput:"#register-password-input",passwordConfirmInput:"#register-password-confirm-input",firstNameInput:"#register-firstname-input",lastNameInput:"#register-lastname-input",phoneInput:"#register-phone-input",addressInput:"#register-address-input",submitButton:"#register-button",errorMessage:"#register-error-message"},handlers:{registerProcess:function(){var e=RegisterForm,s=window.$,t=s(e.elements.emailInput).val().trim(),r=s(e.elements.passwordInput).val(),n=s(e.elements.passwordConfirmInput).val(),i=s(e.elements.firstNameInput).val().trim(),a=s(e.elements.lastNameInput).val().trim(),o=s(e.elements.phoneInput).val().trim(),l=s(e.elements.addressInput).val().trim();let d=s(e.elements.errorMessage),m=s(e.elements.submitButton);d.text("").removeClass("is-danger is-success"),t&&r&&n&&i&&a?r!==n?d.text("Passwords do not match.").addClass("is-danger"):(m.prop("disabled",!0).addClass("is-loading"),s.ajax({url:"user/register",type:"POST",contentType:"application/json",data:JSON.stringify({username:t,email:t,password:r,type:"user",permissions:16,personal_info:{first_name:i,last_name:a,phone:o,address:l}}),success:function(s){if(d.text("").removeClass("is-danger is-success"),"User registered"===s.message)d.text("Registration successful! You can now log in.").addClass("is-success"),setTimeout(function(){window.location.href="/login"},1e3);else if(s.message)d.text(s.message).addClass("is-danger");else if(s.error)d.text(s.error).addClass("is-danger");else if(s.messages){let e="";e="object"==typeof s.messages?Object.values(s.messages).join(" "):s.messages,d.text(e).addClass("is-danger")}else d.text("Registration failed. Please try again.").addClass("is-danger");m.prop("disabled",!1).removeClass("is-loading")},error:function(e){let s="An error occurred. Please try again.";e.responseJSON&&e.responseJSON.messages?s=e.responseJSON.messages.error:e.responseJSON&&e.responseJSON.error&&(s=e.responseJSON.error),d.text(s).addClass("is-danger"),m.prop("disabled",!1).removeClass("is-loading")}})):d.text("Please fill in all required fields.").addClass("is-danger")}},events:{registerSubmit:function(){let s=RegisterForm;var e=window.$,t=e(s.elements.registerContainer),e=e(s.elements.submitButton);t.on("submit",function(e){e.preventDefault(),s.handlers.registerProcess()}),e.on("click",function(e){e.preventDefault(),s.handlers.registerProcess()})},init:function(){this.registerSubmit()}},init:function(){this.events.init()}};document.addEventListener("DOMContentLoaded",function(){RegisterForm.init()});